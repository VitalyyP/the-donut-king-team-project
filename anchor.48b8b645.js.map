{"version":3,"sources":["js/anchor.js"],"names":["isDomElement","obj","Element","isMouseEvent","MouseEvent","findScrollingElement","element","clientHeight","scrollHeight","clientWidth","scrollWidth","parentNode","d","document","scrollTopValue","domElement","scrollTop","offsetTopValue","offsetTop","requestAnimFrame","anchor1Link","anchor2Link","anchor3Link","anchor4Link","anchor1Link2","anchor2Link2","anchor3Link2","anchor4Link2","anchor1","anchor2","anchor3","anchor4","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","scrollTo","to","duration","start","documentElement","body","change","currentTime","console","log","animateScroll","val","amount","Math","easeInOutQuad","getElementById","addEventListener","e","t","b","c","easeInCubic","inOutQuintic","ts","tc"],"mappings":"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","file":"anchor.48b8b645.js","sourceRoot":"../src","sourcesContent":["(function() {\n\tlet d = document;\n\n\tfunction init() {\n\t\t//Links \n\t\tlet anchor1Link  = d.getElementById('anchor1Link');\n\t\tlet anchor2Link  = d.getElementById('anchor2Link');\n\t\tlet anchor3Link  = d.getElementById('anchor3Link');\n\t\tlet anchor4Link  = d.getElementById('anchor4Link');\n\t\tlet anchor1Link2 = d.getElementById('anchor1Link2');\n\t\tlet anchor2Link2 = d.getElementById('anchor2Link2');\n\t\tlet anchor3Link2 = d.getElementById('anchor3Link2');\n\t\tlet anchor4Link2 = d.getElementById('anchor4Link2');\n\t\t//Anchors\n\t\tlet anchor1      = d.getElementById('anchor1');\n\t\tlet anchor2      = d.getElementById('anchor2');\n\t\tlet anchor3      = d.getElementById('anchor3');\n\t\tlet anchor4      = d.getElementById('anchor4');\n\t\t\n\t\tanchor1Link.addEventListener('click', (e) => { scrollTo(anchor1, e) }, false);\n\t\tanchor1Link2.addEventListener('click', (e) => { scrollTo(anchor1, e) }, false);\n\t\tanchor2Link.addEventListener('click', (e) => { scrollTo(anchor2, e) }, false);\n\t\tanchor2Link2.addEventListener('click', (e) => { scrollTo(anchor2, e) }, false);\n\t\t// anchor2Link.onclick = function() { scrollToSimple(document.documentElement, 500, 3000); }\n\t\t// anchor2Link2.onclick = function() { scrollToSimple(document.documentElement, 0, 3000); }\n\t\tanchor3Link.addEventListener('click', (e) => { scrollTo(anchor3, e) }, false);\n\t\tanchor3Link2.addEventListener('click', (e) => { scrollTo(anchor3, e) }, false);\n\t\tanchor4Link.addEventListener('click', (e) => { scrollTo(anchor4.offsetTop, e) }, false);\n\t\tanchor4Link2.addEventListener('click', (e) => { scrollTo(anchor4.offsetTop, e) }, false);\n\t\t\n\t\tconsole.log(anchor2); //DEBUG\n\t\tconsole.log('anchor1: '+scrollTopValue(anchor1)+' / '+offsetTopValue(anchor1)); //DEBUG\n\t\tconsole.log('anchor2: '+scrollTopValue(anchor2)+' / '+offsetTopValue(anchor2)); //DEBUG\n\t\tconsole.log('anchor3: '+scrollTopValue(anchor3)+' / '+offsetTopValue(anchor3)); //DEBUG\n\t\tconsole.log('anchor4: '+scrollTopValue(anchor4)+' / '+offsetTopValue(anchor4)); //DEBUG\n\t\t// d.addEventListener('scroll', (e) => { console.log(e) }, false); //DEBUG\n\t\t\n\t\tconsole.log('App loaded. Have fun!');\n\t}\n\t\n\tfunction scrollTopValue(domElement) { //DEBUG\n\t\treturn 'scrollTopValue:', domElement.scrollTop;\n\t}\n\tfunction offsetTopValue(domElement) { //DEBUG\n\t\treturn 'offsetTopValue:', domElement.offsetTop;\n\t}\n\n\t/*function scrollToSimple(element, to, duration) { //FIXME finish this\n\t\tif (duration < 0) return;\n\t\tvar difference = to - element.offsetTop;\n\t\tvar perTick = difference / duration * 10;\n\t\tconsole.log('perTick', perTick); //DEBUG\n\n\t\tsetTimeout(function() {\n\t\t\tconsole.log('element.scrollTop:', element.scrollTop); //DEBUG\n\t\t\telement.scrollTop += perTick;\n\t\t\tconsole.log('element.scrollTop:', element.scrollTop); //DEBUG\n\t\t\tscrollTo(element, to, duration - 10);\n\t\t}, 10);\n\t}*/\n\n\t//cf. https://gist.github.com/james2doyle/5694700\n\t// requestAnimationFrame for Smart Animating https://goo.gl/sx5sts\n\tvar requestAnimFrame = (function() {\n\t\treturn window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) {\n\t\t\twindow.setTimeout(callback, 1000 / 60);\n\t\t};\n\t})();\n\n\tfunction scrollTo(to, callback, duration = 1500) { //FIXME this always starts from '0', instead of the clicked element offsetTop -> This is because the position is calculated for the main <html> element, not the <iframe>'s <html> tag\n\t\t/*console.log('from:', from); //DEBUG\n\t\t// console.log('from.clientY:', from.clientY); //DEBUG\n\t\t// console.log('from.target.offsetTop:', from.target.offsetTop); //DEBUG\n\t\t\n\t\t// console.log('position():', document.documentElement.offsetTop || document.body.parentNode.offsetTop || document.body.offsetTop); //DEBUG\n\t\t// console.log('document.documentElement:', document.documentElement); //DEBUG\n\t\t// console.log('document.body:', document.body); //DEBUG\n\t\tlet start;\n\t\t\n\t\tif (isMouseEvent(from)) { //FIXME : the scroll starts at the link, not where the screen really is : fix that\n\t\t\t// start = from.target.offsetTop;\n\t\t\tstart = from.pageY; //FIXME\n\t\t}\n\t\telse {\n\t\t\tstart = from;\n\t\t}*/\n\t\t\n\t\tif (isDomElement(to)) {\n\t\t\t// console.log('this is an element:', to); //DEBUG\n\t\t\tto = to.offsetTop;\n\t\t}\n\t\t/*else {\n\t\t\t// console.log('this is NOT an element:', to); //DEBUG\n\t\t}*/\n\t\t\n\t\t// because it's so fucking difficult to detect the scrolling element, just move them all\n\t\tfunction move(amount) {\n\t\t\t// document.scrollingElement.scrollTop = amount; //FIXME Test that\n\t\t\tdocument.documentElement.scrollTop = amount;\n\t\t\tdocument.body.parentNode.scrollTop = amount;\n\t\t\tdocument.body.scrollTop = amount;\n\t\t}\n\n\t\tfunction position() {\n\t\t\treturn document.documentElement.offsetTop || document.body.parentNode.offsetTop || document.body.offsetTop;\n\t\t}\n\t\t\n\t\tvar start = position(),\n\t\t\tchange = to - start,\n\t\t\tcurrentTime = 0,\n\t\t\tincrement = 20;\n\t\tconsole.log('start:', start); //DEBUG\n\t\tconsole.log('to:', to); //DEBUG\n\t\tconsole.log('change:', change); //DEBUG\n\t\t\n\t\tvar animateScroll = function() {\n\t\t\t// increment the time\n\t\t\tcurrentTime += increment;\n\t\t\t// find the value with the quadratic in-out easing function\n\t\t\tvar val = Math.easeInOutQuad(currentTime, start, change, duration);\n\t\t\t// move the document.body\n\t\t\tmove(val);\n\t\t\t// do the animation unless its over\n\t\t\tif (currentTime < duration) {\n\t\t\t\trequestAnimFrame(animateScroll);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (callback && typeof(callback) === 'function') {\n\t\t\t\t\t// the animation is done so lets callback\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tanimateScroll();\n\t}\n\n\tinit();\n})();\n\n//-------------------- Unimportant js functions --------------------\n// easing functions https://goo.gl/5HLl8\n//t = current time\n//b = start value\n//c = change in value\n//d = duration\nMath.easeInOutQuad = function(t, b, c, d) {\n\tt /= d / 2;\n\tif (t < 1) {\n\t\treturn c / 2 * t * t + b\n\t}\n\tt--;\n\treturn -c / 2 * (t * (t - 2) - 1) + b;\n};\n\nMath.easeInCubic = function(t, b, c, d) {\n\tvar tc = (t /= d) * t * t;\n\treturn b + c * (tc);\n};\n\nMath.inOutQuintic = function(t, b, c, d) {\n\tvar ts = (t /= d) * t,\n\t\ttc = ts * t;\n\treturn b + c * (6 * tc * ts + -15 * ts * ts + 10 * tc);\n};\n\nfunction isDomElement(obj) {\n    return obj instanceof Element;\n}\n\nfunction isMouseEvent(obj) {\n    return obj instanceof MouseEvent;\n}\n\nfunction findScrollingElement(element) { //FIXME Test this too\n\tdo {\n\t\tif (element.clientHeight < element.scrollHeight || element.clientWidth < element.scrollWidth) {\n\t\t\treturn element;\n\t\t}\n\t} while (element = element.parentNode);\n}\n"]}